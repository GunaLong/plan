<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="../css/bootstrap.min.css" />
    <link rel="stylesheet" href="../css/loginstyle.css" />
    <link rel="stylesheet" href="../css/media.css">
    <script src="../js boostrap/jquery-3.6.0.js"></script>
    <script src="../js boostrap/bootstrap.bundle.js"></script>
  </head>
  <body>
    <div class="main container">
      <h1>會員登入</h1>
      <div class="loginBtn">
        <button id="login">登入</button>
        <button id="register">註冊</button>
        <div style="background-color: rgb(187, 186, 186); height: 2px;  width: 406px; margin-left: 47px;">
        <div id="x" style="background-color: rgb(190, 82, 82);height: 2px; width: 203px ; transform: translateX(0px); transition: 0.3s;"></div></div>
      </div>

      <!-- 登入區 -->
      <div class="row">
       <div class="col-2"></div>
       <div class="uidName col-8" style="text-align: left">
        <form action="" name="form">
          <div class="">
            <label for="uid">帳號</label><br />
            <input
            class="uidPass"
              type="text"
              name="uid"
              id="uid"
              placeholder="請輸入手機號碼或信箱"
              required
            />
          </div>
          <div class="">
            <label for="passWord">密碼</label><br />
            <input type="password" name="" id="passWord"class="uidPass" />
          </div>
          <div class="row">
            <div class="col-4"></div>
            <div class="col-4 ms-lg-5"><input type="submit" class="btn btn-danger mt-5" value="登入" id="submit1"></input></div>
            <div class="col-4"></div>
          </div>
        </form>
       </div>
       <div class="col-2"></div>
      
      </div>


      <!-- 註冊區 -->
      <div class="row">
        <div class="col-2"></div>
        <div class="uidName1 col-8"  style="text-align: left">
         <form action="" name="form1" >
          <div class="">
            <label for="uid"><span >*</span> 姓名</label><br />
            <input
            class="uidPass1"
              type="text"
              
              id="uid1"
              placeholder="請輸入您的姓名"
              required
            />
          </div>
          <div class="">
            <label for="passWord"><span>*</span>手機號碼</label><br />
            <input type="password"  id="email"class="uidPass1" placeholder="請輸入手機號碼或信箱" required/>
          </div>
          <div class="row">
            <div class="col-4"></div>
            <div class="col-4 ms-lg-5"><input type="submit" class="btn btn-danger mt-5" value="註冊" id="btnRegister"></input></div>
            <div class="col-4"></div>
          </div>
          <br>
         </form>
       </div>
       <div class="col-2"></div>
       <br>
        <div class="box">
          <span class="line"></span>
          <span class="txt">快速登入</span>
          <span class="line"></span>
        </div>
        
        <div class="row">
          <div class="col-2"></div>
          <div class="col-4"><button class="btn">google登入</button></div>
          <div class="col-4"><button class="btn">facebook登入</button></div>
          <div class="col-2"></div>
        </div>
      </div>
    <script>
      $(function () {
        // 登入區
        $("#login").on("click", function () {
          $("#login").css({
            color: "rgb(207, 57, 57)",
          });
          $("#register").css({
            color: "rgb(0,0,0)",
          });
          $('#x').css('transform','translateX(0px)')
          $(".uidName").css('display','block')
          $(".uidName1").css('display','none')
          $('h1').text('會員登入')
        });
        // 註冊區
        $("#register").on("click", function () {
          $("#login").css({
            color: "rgb(0,0,0)",
          });
          $("#register").css({
            color: "rgb(207, 57, 57)",
          });
          $('#x').css('transform','translateX(203px)')
          
          $(".uidName").css('display','none')
          $(".uidName1").css('display','block')
          

          $('h1').text('會員註冊')
        });
        // var form = document.forms['form1']
        // // submit.onclick =function  (){
        // // alert (uid.value)}
        // // 從表單裡抓input資料
        // var dataUid = form1.uid.value

      submit1.onclick = ()=>{
      $.ajax({
        method:'get',
        url: "http://localhost:8000/",
        success:(data)=>{
          let flag = false
          data.forEach((val,i)=>{
            console.log(val)
          if(val.uid == $('#uid').val() && val.password == $("#passWord").val()){
            alert('登入成功')
            window.location.href='https://www.google.com.tw/'
            flag =true
          }
        })
        if(!flag){
          alert('登入失敗')}
        },
        error:() =>{
          alert('失敗')
        }
        
      })
      return false
    }



      btnRegister.onclick = function () {
      let data = {
        uid: `${$("#uid1").val()}`,
        password: `${$("#email").val()}`,
      };
      $.ajax({
        method: "post",
        url: "http://localhost:8000/",
        data: data,
        success: function (data) {
          console.log(data.data[0].job);
          data.data.forEach((element, i) => {
            console.log(element);
          });
          alert('註冊成功')
        },
          
        error: function () {
          //資料傳送失敗後就會執行這個function內的程式，可以在這裡寫入要執行的程式
          alert("失敗");
        },
      });
      
    };
      });
    </script>
  </body> 
</html>
